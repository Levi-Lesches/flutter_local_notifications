<html>
  <head>
    <script>
      async function init() {
        let registration = await window.navigator.serviceWorker.getRegistration();
        if (registration != null) await registration.unregister();
        await window.navigator.serviceWorker.register("flutter_service_worker.js");
        window.navigator.serviceWorker.addEventListener("message", (event) => {
          console.log("Received event: ");
          console.log(event);
        });
      }

      async function notify() {
        let registration = await window.navigator.serviceWorker.getRegistration();
        let result = await Notification.requestPermission();
        registration.showNotification("Hello World!", {
          actions: [
            {action: "action1", title: "Action 1"},
            {action: "action2", title: "Action 2"},
          ],
          body: "This was sent from JS",
          data: "/path/to/notif",
          requireInteraction: true,
        },);
      }
      init();
    </script>
  </head>
  <body>
    <button onclick="notify()">Click me!</button>
  </body>
</html>
